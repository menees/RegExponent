<Window
	x:Class="RegExponent.FontDialog"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:local="clr-namespace:RegExponent"
	Title="Font"
	Height="400"
	Width="600"
	ResizeMode="NoResize"
	ShowInTaskbar="False"
	WindowStartupLocation="CenterOwner"
	FocusManager.FocusedElement="{Binding ElementName=fontFamilyListBox}"
	Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" Loaded="Window_Loaded">
	<Window.Resources>
		<local:FontFamilyMonospaceMarkConverter x:Key="MonospaceMarker" />
	</Window.Resources>
	<Grid x:Name="mainGrid">

		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="10" />
			<ColumnDefinition x:Name="familyColumn" />
			<ColumnDefinition x:Name="familySpaceColumn" Width="10" />
			<ColumnDefinition x:Name="styleColumn" Width="Auto" />
			<ColumnDefinition x:Name="styleSpaceColumn" Width="10" />
			<ColumnDefinition x:Name="weightColumn" Width="Auto" />
			<ColumnDefinition x:Name="weightSpaceColumn" Width="10" />
			<ColumnDefinition x:Name="sizeColumn" Width="Auto" />
			<ColumnDefinition x:Name="sizeSpaceColumn" Width="10" />
			<ColumnDefinition Width="Auto" />
			<ColumnDefinition Width="10" />
		</Grid.ColumnDefinitions>

		<Grid.RowDefinitions>
			<RowDefinition Height="10" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="3*"/>
			<RowDefinition Height="10" />
			<RowDefinition />
			<RowDefinition Height="10" />
		</Grid.RowDefinitions>

		<!-- Font Family -->
		<DockPanel Grid.Column="1" Grid.Row="1">
			<Label Target="{Binding ElementName=fontFamilyListBox}">_Font:</Label>
			<CheckBox HorizontalAlignment="Right" VerticalAlignment="Center"
					  IsChecked="{Binding MonospaceOnly, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay}"
					  Visibility="{Binding MonospaceOnlyVisibility, RelativeSource={RelativeSource AncestorType=Window}, Mode=OneWay}">_Monospace Only</CheckBox>
		</DockPanel>
		<TextBox Name="fontFamilyTextBox" Grid.Column="1" Grid.Row="2" Text="{Binding ElementName=fontFamilyListBox,Path=SelectedItem}" TextChanged="FontFamilyTextBox_TextChanged" />
		<ListBox Name="fontFamilyListBox" Grid.Column="1" Grid.Row="3" SelectedIndex="0">
			<ListBox.ItemTemplate>
				<DataTemplate>
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="16" />
							<ColumnDefinition Width="*" />
							<ColumnDefinition Width="Auto" />
						</Grid.ColumnDefinitions>
						<TextBlock Grid.Column="0" Text="{Binding Converter={StaticResource MonospaceMarker}}"/>
						<TextBlock Grid.Column="1" Text="{Binding}" Margin="0,0,2,0" />
						<!-- Put the preview text in a separate text block since symbol fonts won't render the family name correctly.
						And there's no good way to check for the old Win32 SYMBOL_CHARSET flag in WPF. -->
						<TextBlock Grid.Column="2" Text="AaBbYyZz" FontFamily="{Binding}" HorizontalAlignment="Right"/>
					</Grid>
				</DataTemplate>
			</ListBox.ItemTemplate>
			<ListBox.ItemContainerStyle>
				<!-- This stretch is required so the right alignment works on the TextBlock above. https://stackoverflow.com/a/20934416/1882616 -->
				<Style TargetType="ListBoxItem">
					<Setter Property="HorizontalContentAlignment" Value="Stretch"/>
				</Style>
			</ListBox.ItemContainerStyle>
		</ListBox>

		<!-- Font Style -->
		<Label Grid.Column="3" Grid.Row="1" Target="{Binding ElementName=fontStyleListBox}">St_yle:</Label>
		<TextBox Name="fontStyleTextBox" Grid.Column="3" Grid.Row="2" Text="{Binding ElementName=fontStyleListBox,Path=SelectedItem}" TextChanged="FontStyleTextBox_TextChanged" IsReadOnly="True" />
		<ListBox Name="fontStyleListBox" Grid.Column="3" Grid.Row="3" Padding="0,0,5,0" SelectedIndex="0">
			<ListBox.ItemTemplate>
				<DataTemplate>
					<TextBlock Text="{Binding}" FontStyle="{Binding}" />
				</DataTemplate>
			</ListBox.ItemTemplate>
		</ListBox>

		<!-- Font Weight -->
		<Label Grid.Column="5" Grid.Row="1" Target="{Binding ElementName=fontWeightListBox}">_Weight:</Label>
		<TextBox Name="fontWeightTextBox" Grid.Column="5" Grid.Row="2" Text="{Binding ElementName=fontWeightListBox,Path=SelectedItem}" TextChanged="FontWeightTextBox_TextChanged" IsReadOnly="True" />
		<ListBox Name="fontWeightListBox" Grid.Column="5" Grid.Row="3" Padding="0,0,5,0" SelectedIndex="0">
			<ListBox.ItemTemplate>
				<DataTemplate>
					<TextBlock Text="{Binding}" FontWeight="{Binding}" />
				</DataTemplate>
			</ListBox.ItemTemplate>
		</ListBox>

		<!-- Font Size -->
		<Label Grid.Column="7" Grid.Row="1" Target="{Binding ElementName=fontSizeListBox}">Si_ze:</Label>
		<TextBox Name="fontSizeTextBox" Grid.Column="7" Grid.Row="2" Text="{Binding ElementName=fontSizeListBox,Path=SelectedItem}" TextChanged="FontSizeTextBox_TextChanged" IsReadOnly="True" />
		<ListBox Name="fontSizeListBox" Grid.Column="7" Grid.Row="3" Width="60" SelectedIndex="0" />

		<!-- Preview -->
		<GroupBox Grid.Column="1" Grid.ColumnSpan="9" Grid.Row="5" Header="Preview">
			<TextBlock TextAlignment="Center" VerticalAlignment="Center"
				FontStyle="{Binding ElementName=fontStyleListBox,Path=SelectedItem}"
				FontWeight="{Binding ElementName=fontWeightListBox,Path=SelectedItem}"
				FontSize="{Binding ElementName=fontSizeListBox,Path=SelectedItem}"
				FontFamily="{Binding ElementName=fontFamilyListBox,Path=SelectedItem}">
				The quick brown fox jumps over the lazy dog.
			</TextBlock>
		</GroupBox>

		<!-- Accept or Cancel -->
		<StackPanel Grid.Column="9" Grid.Row="2" Grid.RowSpan="3">
			<Button Height="25" Width="70" Name="okButton" Click="OkButton_Click" Margin="0,0,0,5" IsDefault="True">_OK</Button>
			<Button Height="25" Width="70" Name="cancelButton" IsCancel="True">_Cancel</Button>
		</StackPanel>

	</Grid >

</Window>
